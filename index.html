<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
    <div class="container">
        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
        <div class="sidebar">
            <div class="search-container">
                <input type="text" 
                       class="search-input" 
                       placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©..."
                       oninput="searchSurahs(this.value)">
            </div>
            <ul class="surah-list" id="surahList"></ul>
        </div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="main-content">
            <div class="header">
                <h1>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
            </div>
            <div id="ayatContainer"></div>
        </div>
    </div>

    <script src="data/quran-data.js"></script>
    <script>
        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±
        function displaySurahs(surahsToShow = quranData.surahs) {
            const surahList = document.getElementById('surahList');
            surahList.innerHTML = '';
            
            surahsToShow.forEach(surah => {
                const surahElement = document.createElement('div');
                surahElement.className = 'surah-item';
                surahElement.onclick = () => displaySurah(surah);
                
                const surahName = document.createElement('div');
                surahName.className = 'surah-name';
                surahName.textContent = `${surah.number}. ${surah.name}`;
                
                surahElement.appendChild(surahName);
                surahList.appendChild(surahElement);
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù…Ø¹ Ø¢ÙŠØ§ØªÙ‡Ø§ ÙˆØªÙØ³ÙŠØ±Ù‡Ø§
        function displaySurah(surah) {
            const mainContent = document.querySelector('.main-content');
            mainContent.innerHTML = '';

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø³Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³ÙˆØ± Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„ØªÙˆØ¨Ø©
            if (surah.number !== 9) {
                const bismillah = document.createElement('div');
                bismillah.className = 'bismillah';
                bismillah.textContent = 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù';
                mainContent.appendChild(bismillah);
            }

            // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³ÙˆØ±Ø©
            const titleContainer = document.createElement('div');
            titleContainer.className = 'surah-title-container';
            
            const title = document.createElement('h2');
            title.className = 'surah-title';
            title.textContent = `Ø³ÙˆØ±Ø© ${surah.name}`;
            
            titleContainer.appendChild(title);
            mainContent.appendChild(titleContainer);

            // Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ§Øª Ù…Ø¹ ØªÙØ³ÙŠØ±Ù‡Ø§
            if (surah.ayahsData) {
                surah.ayahsData.forEach(ayah => {
                    const ayahDiv = document.createElement('div');
                    ayahDiv.className = 'ayah-container';
                    ayahDiv.innerHTML = `
                        <div class="ayah-text">
                            <span class="ayah-number">${ayah.number}</span>
                            ${ayah.text}
                        </div>
                        <div class="tafseer">
                            ${ayah.tafseer}
                        </div>
                    `;
                    mainContent.appendChild(ayahDiv);
                });
            }

            // ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
            mainContent.scrollTop = 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù†Ø´Ø· ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            document.querySelectorAll('.surah-item').forEach(item => {
                item.classList.remove('active');
                if (item.querySelector('.surah-name').textContent === `${surah.number}. ${surah.name}`) {
                    item.classList.add('active');
                }
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³ÙˆØ±
        function searchSurahs(query) {
            const filteredSurahs = quranData.surahs.filter(surah => 
                surah.name.includes(query) || 
                surah.nameEn.toLowerCase().includes(query.toLowerCase()) ||
                surah.number.toString().includes(query)
            );
            displaySurahs(filteredSurahs);
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const themeButton = document.querySelector('.theme-toggle');
            if (document.body.classList.contains('dark-mode')) {
                themeButton.textContent = 'â˜€ï¸';
            } else {
                themeButton.textContent = 'ğŸŒ™';
            }
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© ØªÙØ¶ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.querySelector('.theme-toggle').textContent = 'â˜€ï¸';
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        displaySurahs();
        displaySurah(quranData.surahs[0]);
    </script>
</body>
</html>
